"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = provideCore;

function _bluebird() {
  const data = require("bluebird");

  _bluebird = function () {
    return data;
  };

  return data;
}

function _core() {
  const data = _interopRequireDefault(require("./core"));

  _core = function () {
    return data;
  };

  return data;
}

function provideCore(_x, _x2, _x3, _x4) {
  return _provideCore.apply(this, arguments);
}

function _provideCore() {
  _provideCore = (0, _bluebird().coroutine)(function* ([config, logger, workspace, scope], _config, _slots, harmony) {
    // TODO: change to get the maybe value
    const actualConfig = config.type ? config : undefined;
    const core = new (_core().default)(harmony, actualConfig, logger.createLogPublisher('core'), scope, workspace);
    yield core.init();
    return core;
  });
  return _provideCore.apply(this, arguments);
}